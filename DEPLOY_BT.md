# 宝塔面板部署指南 (Web版)

本项目已改造为 Web 网页版，适合手机直接访问，无需小程序备案。

## 1. 环境准备

1.  登录宝塔面板。
2.  进入 **软件商店**。
3.  搜索 `Node.js`，安装 **Node.js版本管理器**。
4.  安装完成后，点击设置，选择 **v18.x** 或更高版本安装，并**设为默认**。

## 2. 上传代码

1.  进入 **文件** 菜单。
2.  在 `/www/wwwroot` 目录下新建一个文件夹，例如 `guandan`。
3.  将本地项目所有文件上传到该目录（除了 `node_modules`）。

## 3. 安装依赖与构建

这是 Web 版的关键步骤，需要构建前端页面。

1.  在文件管理中，点击 **终端** (Terminal) 图标进入命令行。
2.  执行安装依赖：
    ```bash
    npm install
    ```
3.  执行构建（生成网页文件）：
    ```bash
    npm run build
    ```
    *   成功后，你会看到项目根目录下多了一个 `dist` 文件夹，这里面就是网页文件。

## 4. 添加 Node 项目

1.  进入 **网站** -> **Node项目**。
2.  点击 **添加Node项目**。
3.  填写配置：
    *   **项目目录**: 选择 `/www/wwwroot/guandan`。
    *   **启动选项**: 选择 `自定义启动命令`。
    *   **启动命令**: `npx tsx api/server.ts`
    *   **项目端口**: `3001`
    *   **运行用户**: `www`
4.  点击 **提交**。

## 5. 访问

1.  在浏览器中输入 `http://服务器IP:3001` 即可访问。
2.  (可选) 如果配置了域名映射（80端口），直接访问域名即可。

## 6. 常见问题

*   **构建失败**：如果 `npm run build` 报错内存不足，尝试在本地执行 `npm run build`，然后把生成的 `dist` 文件夹上传到服务器根目录，再在服务器启动 Node 项目。
*   **端口不通**：确保宝塔安全设置和云服务器安全组都放行了 3002 端口。
